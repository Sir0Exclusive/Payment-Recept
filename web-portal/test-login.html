<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Test</title>
    <style>
        body { font-family: Arial; padding: 40px; background: #f0f0f0; }
        .box { background: white; padding: 30px; max-width: 500px; margin: 0 auto; border-radius: 10px; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
        button { width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .result { margin-top: 20px; padding: 15px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="box">
        <h1>üîç Admin Login Test</h1>
        <p>Testing authentication system</p>
        
        <input type="email" id="email" placeholder="Email" value="sarwaroffjp@gmail.com">
        <input type="password" id="password" placeholder="Password" value="@arfi1234">
        <button onclick="testLogin()">Test Login</button>
        
        <div id="result"></div>
        
        <h3 style="margin-top:30px;">Debug Info:</h3>
        <pre id="debug" style="background:#f5f5f5;padding:15px;border-radius:5px;font-size:12px;"></pre>
    </div>

    <script>
        const ADMIN_EMAIL = 'sarwaroffjp@gmail.com';
        const ADMIN_PASSWORD = '@arfi1234';
        
        function testLogin() {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const resultDiv = document.getElementById('result');
            const debugDiv = document.getElementById('debug');
            
            let debug = 'LOGIN TEST\n\n';
            debug += 'Entered Email: ' + email + '\n';
            debug += 'Password Length: ' + password.length + '\n';
            debug += 'Expected Email: ' + ADMIN_EMAIL + '\n';
            debug += 'Expected Password: ' + ADMIN_PASSWORD + '\n\n';
            
            // Test email match
            const emailMatch = email.toLowerCase() === ADMIN_EMAIL.toLowerCase();
            debug += 'Email Match: ' + emailMatch + '\n';
            
            // Test password match
            const passwordMatch = password === ADMIN_PASSWORD;
            debug += 'Password Match: ' + passwordMatch + '\n\n';
            
            if (emailMatch && passwordMatch) {
                // Test session save
                try {
                    const session = {
                        userType: 'admin',
                        email: email,
                        name: 'Admin',
                        timestamp: new Date().getTime()
                    };
                    localStorage.setItem('paymentReceiptSession', JSON.stringify(session));
                    debug += 'Session Saved: YES\n';
                    
                    // Test session read
                    const saved = localStorage.getItem('paymentReceiptSession');
                    debug += 'Session Retrieved: ' + (saved ? 'YES' : 'NO') + '\n';
                    if (saved) {
                        debug += 'Session Data:\n' + JSON.stringify(JSON.parse(saved), null, 2) + '\n';
                    }
                    
                    resultDiv.innerHTML = '<div class="result success">‚úÖ LOGIN SUCCESSFUL! Session saved.</div>';
                } catch (err) {
                    debug += 'Error saving session: ' + err.message + '\n';
                    resultDiv.innerHTML = '<div class="result error">‚ùå Error: ' + err.message + '</div>';
                }
            } else {
                debug += 'LOGIN FAILED\n';
                resultDiv.innerHTML = '<div class="result error">‚ùå Invalid credentials</div>';
            }
            
            debugDiv.textContent = debug;
        }
        
        // Auto-test on load
        window.addEventListener('DOMContentLoaded', () => {
            const debugDiv = document.getElementById('debug');
            debugDiv.textContent = 'Page loaded. localStorage available: ' + (typeof localStorage !== 'undefined' ? 'YES' : 'NO');
        });
    </script>
</body>
</html>
